---
title: X86-64中mov操作的一些疑难理解记录
top_img: false
cover: /img/cover.png
date: 2020-11-18 22:08:45
tags:
- CSAPP
---

在写ICS作业的时候，我经常会因为看到以下代码而感到困惑。

```assembly
movb	$0xFF,	%bl
```

我很纳闷，为什么这里是`movb`而不是`movl`，左边的immediate数不是32位补码吗？然后和院长交流了一下，突然点醒了我。

其实不管是从immediate数还是从memory传数据到寄存器的时候，如果是**等长传送**的话，它只会取**目标寄存器**该取的长度。也就是说，即使是32-bit的immediate数，它也会作一次截取，把该拿走的位数拿走而已。如果是从memory拿那就更简单了，你要几个byte，就从内存初始地址拿几个byte，不过需要注意这里小端法和大端法会有区别，在相同的指令下他们可能会拿走不一样的数据。
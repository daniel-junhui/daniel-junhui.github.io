<!doctype html><html><head><title>Raft</title><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><meta property="og:title" content="Raft"><meta property="og:description" content="2023.02.05 update: 实际上这个 lab 我做的复杂了，不一定需要用条件变量。"><meta property="og:type" content="article"><meta property="og:url" content="https://jhzhu.xyz/posts/raft/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-10T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-10T00:00:00+00:00"><meta property="og:site_name" content="My Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Raft"><meta name=twitter:description content="2023.02.05 update: 实际上这个 lab 我做的复杂了，不一定需要用条件变量。"><script src=/js/toc.js></script>
<link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><link rel=stylesheet href=/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Material+Icons"></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item active" href=/posts>Archive</a>
<a class="a-block drawer-menu-item false" href=/tags>Tags</a>
<a class="a-block drawer-menu-item false" href=/about>About me</a>
<a class="a-block drawer-menu-item false" href=/index.xml>RSS Feed</a><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#raft class=nav-raft>Raft</a></li><ul><li><a href=#leader-election class=nav-leader-election>Leader election</a></li><li><a href=#log-replication class=nav-log-replication>Log replication</a></li><li><a href=#safety class=nav-safety>Safety</a></li></ul><li><a href=#6824-lab2 class=nav-6824-lab2>6.824 lab2</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu</i></button>
<a id=navTitle class=navbar-brand href=https://jhzhu.xyz>Daniel Zhu</a>
<button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://jhzhu.xyz><div class=single-column-header-title>Daniel Zhu</div><div class=single-column-header-subtitle>A speck of dust within the galaxy</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper-text-only><div class=post-title>Raft<div class=post-meta><time itemprop=datePublished>2022-06-10 00:00</time>
<i class=material-icons>label</i>
<a href=/tags/go>Go</a>
&nbsp;
<a href=/tags/distributed-systems>Distributed Systems</a>
&nbsp;
<a href=/tags/raft>Raft</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><p>2023.02.05 update: 实际上这个 lab 我做的复杂了，不一定需要用条件变量。</p><h2 id=raft>Raft</h2><p>Raft 是简化版的、工程化的 Paxos，分成了 Leader election、Log replication 和 Safety 三个相对独立的模块。</p><p><a href=https://pdos.csail.mit.edu/6.824/papers/raft-extended.pdf>Extended Raft paper</a> 详细阐明了 Raft 的逻辑，6.824 的 2A、2B 和 2C 都可以用 paper 里的 Figure 2 来概括。</p><p><img src=/images/raft.png alt=Raft></p><h3 id=leader-election>Leader election</h3><ol><li>每一个 server 都有内部的 term （从 1 开始）和投票状态 <code>votedFor</code>。term 在 Raft 中是一个非常特殊的状态变量，对于某一个 server 来说，只有在<strong>在一定时间没有收到 leader 的 heartbeat</strong> 后（包括出现 split votes 的情况下），才会引发 term 的自增，而 term 的自增总会伴随着一阵新的 election。</li><li>每一个 candidate 向 peer 发送 <code>RequestVote</code> 后，如果得到了超过半数的 votes，便会转化为 leader。自此，该 server 会尝试着维持现在的 term，并作为 leader 周期性 heartbeat followers。</li><li>当 follower 收到某个 leader 的 heartbeat 后，如果（在这个 RPC 中）该 leader 的 term 比自己的 term 小（这意味着该 leader 不应该再是 leader，因为一定存在一个 server 已经自增 term 并尝试成为新的 leader），此时需要将该信息 response 给该 leader，让其退化为 follower。<strong>这里的该 leader 的真实状态不一定真的是 leader，因为可能存在网络延迟的问题，这个 heartbeat RPC 被推迟送达。</strong></li><li>当某个 leader 的 heartbeat 信息中的 term 大于等于 follower 的 term 时，follower <strong>无条件</strong>认可该 leader 的信息。可能会觉得 follower 的行为过于被动，但是 follower 用 <strong>term</strong> 对 leader 的 check 本身就保证了安全性。<strong>对于每一个 follower 本身来说，只要 leader 的 term 至少比我的 term 大，那它的状态便是超前于我的，我便可以接受它的指令，即使它现在可能早就不是 leader 了。</strong></li><li>Raft 采用 random election timeouts 来避免 split votes。</li></ol><h3 id=log-replication>Log replication</h3><ol><li>每一个 leader 需要维护 peers 的 matchIndex 和 nextIndex 状态。<ol><li>每一个 heartbeat RPC 里携带了需要给该 follower 同步的 log entries，在 <a href=https://pdos.csail.mit.edu/6.824/papers/raft-extended.pdf>Extended Raft paper</a> 里每个 RPC 只有一个或者零个（pure heartbeat），但是在 6.824 lab2C 里会优化这个机制，让每个 RPC 携带多个 entries，提高效率。<strong>而对于每个 follower 来说，其 heartbeat RPC 里要放哪些 entries，取决于该 leader 为其维护的 nextIndex。</strong></li><li>当某个 heartbeat 携带了 entries 并得到了对方 follower 的肯定回复时，该 leader 便可以断定该 follower 已经同步了 heartbeat 中涵盖的 log 信息，也就是，完成了 replication，此时可以修改该 follower 的 matchIndex 和 nextIndex。</li><li>每一个 heartbeat RPC 都包含着发送该 RPC 的 leader 认为该 follower 当前所需要同步的 entry index。显然这并不是任何时候都成立的，因此，对于某个 follower，假如该 heartbeat 是合法的（term checked），但是 leader 搞错了 follower 实际需要的 entry index，follower 便会返回 <code>false</code>，让 leader 去修正其为该 follower 维护的 nextIndex，<strong>直到被 follower 肯定回复</strong>。</li><li>在某个 server 刚刚转化为 leader 时，初始化每个 follower 的 matchIndex 为 <code>0</code>，并初始化每个 follower 的 nextIndex 为 <code>nextLogIndex</code>。每一个 server 的 <code>nextLogIndex</code> 是该 server 下一个 potential log entry 的 index。</li></ol></li><li>每一个 server 都需要维护 commitIndex 和 lastApplied。commitIndex 表示：到 commitIndex 之前，所有的 log entry 都被该系统中的 majority 所认可，可以直接放心作用于状态机；lastApplied 表示当前真正已经被作用于状态机（这个动作称为 apply）的最后一个 entry 的 index。<ol><li>对于 leader 来说，由于外部（上层应用的）entry 只能被 leader 所接受，而也只有 leader 会尝试将 entry 同步给 followers，因此 leader 会在某些 entry 被大部分机器所承认时，<strong>主动</strong>修改 commitIndex（在这里，这些 entry 被成为<strong>被 commit</strong> 了。），并将其作为 heartbeat RPC 的一部分信息同步给 followers；</li><li>对于 follower 来说，所有对 commitIndex 的修改都源自于 leader 的 heartbeat。在一般情况下，当 leader 的 commitIndex 大于自身的时，便同步成 leader 的。</li><li>每一个 server 都需要检查自身的 commitIndex 和 lastApplied，当前者大于后者时，便意味着有事情做了，可以把一些 entry 给 apply 掉了。</li></ol></li></ol><h3 id=safety>Safety</h3><p>Leader election 和 log replication 显然是需要某些约束才能保证 Raft 的正确性的。<a href=https://pdos.csail.mit.edu/6.824/papers/raft-extended.pdf>Extended Raft paper</a> 中笼统概括了一些 Safety properties，但是在写 lab 的时候，其实有更多的细节需要去考虑到。</p><ol><li>首先，当所有的 RPC 中包含的 term 小于 server 自身的 term 时，忽略它，或者是返回 <code>false</code>（如果有）。</li><li>当一个 candidate 向其他 server requests votes 时，对于某一个特定的 server，只有该 candidate 的 log 与它自己的 log 相比 <strong>least as up-to-date</strong> 时，才会给予 vote。Log 之间的 up-to-date 是一个非常微妙的比较关系，参考 paper 第 8 页。</li><li>Leader 绝对不可以 commit 不是当前 term 的 entry，即使它确实已经被集群 majority 所共识。该性质解决了 paper 中 Figure 8 阐述的问题，简单来说便是，如果 leader 可以随意 commit 任意被集群多数所共识的 entry，会产生某个 index 的 entry 被 apply 多次的灾难现象，而这是绝对不允许的。<a href=https://zhuanlan.zhihu.com/p/369989974>这篇知乎文章</a>详细解释了 Figure 8，并使用了一个 no-op 来解决这个问题，我最后的代码实现并没有采用额外的 no-op 来做这件事，而是<strong>在 leader 尝试进行 commitIndex 前，进行额外的 term 对比</strong>，假如该 leader 只能找到不是当前 term 的、但是被多数机器所认可的 entry，便<strong>不修改 commitIndex</strong>。</li></ol><h2 id=6824-lab2>6.824 lab2</h2><p>即使看懂了 paper 里 election、replication 和 safety 的三块阐述，编写 lab2 时还是会出现各种各样的奇怪 bug，我最后的版本在连续跑了 800 次 test 后没有报错，提一些细节处理。</p><ol><li>控制锁的粒度，就像 <a href="https://www.youtube.com/watch?v=UzzcUS2OHqo&amp;list=PLrw6a1wE39_tb2fErI4-WkMbsvGQk9_UB&amp;index=5">6.824 助教说的</a>一样，千万不要用很多小锁来保护各种各样的 shared data，锁的粒度太小时跟没有锁是一样的。<strong>锁的终极目的，并不是为了保护 shared data 的原子读写，而是让某些代码（某些行为）连续发生，因此要站在程序运行的角度上去考虑锁的用处。</strong></li><li>尽量用一把大锁去保护临界区，控制并发的力度，可以先从不并发的串行程序开始，小心慢慢提高并发的力度。并发的力度太大会导致很多难以理解的行为，个人建议只需让“真正发送 RPC” 这件事（也就是调用 Call）并发化，会减少很多问题的产生。</li><li><code>votedFor</code> 这个变量需要额外小心，它需要一个 default value（比如 <code>-1</code> ）。<ol><li>根据 Figure 2 和 <a href=https://raft.github.io>Raft 演示</a>，当 follower 做出投票行为时，需要修改 <code>votedFor</code>；</li><li>在 server 收到 RequestVote RPC 时，如果它在先前已经投票给了一个 server，而此时新的 candidate 的 term 更超前时，首先要修改 <code>votedFor</code> 为 default value（意味着回到没有给出投票的状态）；</li><li>在 server 接收 leader 的 heartbeat 时，如果该 server 先前没有投票给该 leader，set <code>votedFor</code> to default value。拍脑袋一想，会觉得这是没有必要的，因为 2 已经保证了 election 开始时，server 会检查 term 重置 <code>votedFor</code>，但在网络不稳定的 Figure 8 的情况下，会更容易产生谁都选不上的活锁；</li><li>在所有的 RPC 调用之后，需要检查 reply 中的 term，如果对方的 term 比自己还要超前，便退化为 follower，退化时也要 <strong>set <code>votedFor</code> to default value</strong>。</li></ol></li><li>在 leader 真正发送 heartbeat RPC 和 candidate 真正发送 <code>ReuqustVote</code> 之前（调用 labrpc 中 Call 方法前），检查当前 go routine 是否已经过期。举个例子，因为调度器的原因，某个过期 leader 的 heartbeat routine 在它被其他 leader heartbeat 后才刚刚被调度运行，而此时的 term 已经超前于创建该 routine 时候的 term，需要设计一个机制来过滤这样的过期 routine（在创建时传入当前 term）；</li><li>用多个 routine 对 commitIndex 和 lastApplied 进行监控，用条件变量进行 routine 之间的通信；</li><li>对 nextIndex 定位的优化可以参考 <a href=https://thesquareplanet.com/blog/students-guide-to-raft/>6.824 助教的文章</a>，这篇文章也提到了许多实现 Raft 时需要注意的细节。要注意，这篇文章假定了 log entry 的 index 从 0 开始，如果你和我一样严格遵守 Figure 2 让 entry index 从 1 开始，需要自己在其思路上额外做一些修改，<strong>并且在完成 lab2D Snapshot 部分时，也需要针对该 optimization 再处理一些额外的边界条件</strong>；</li><li>在发送 apply entry 时（发送 ApplyMsg 给 channel 时），需要注意<strong>锁</strong>。一个推荐的行为是，在等待 channel 消费 ApplyMsg 时把锁释放，换句话说，在 <code>rf.applyCh &lt;- msg</code> 前把锁释放，否则在 2D 有可能会产生无限等待的死锁情况（这个死锁还不会被检测到）。</li></ol><p>最终实现的版本的测试结果的 time consuming、RPC numbers 可以参考：</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>➜  raft git:(master) ✗ go <span style=color:#658b00>test</span> -race
</span></span><span style=display:flex><span>Test (2A): initial election ...
</span></span><span style=display:flex><span>  ... Passed --   3.0  <span style=color:#b452cd>3</span>   <span style=color:#b452cd>74</span>   <span style=color:#b452cd>24538</span>    <span style=color:#b452cd>0</span>
</span></span><span style=display:flex><span>Test (2A): election after network failure ...
</span></span><span style=display:flex><span>  ... Passed --   4.5  <span style=color:#b452cd>3</span>  <span style=color:#b452cd>156</span>   <span style=color:#b452cd>31934</span>    <span style=color:#b452cd>0</span>
</span></span><span style=display:flex><span>Test (2A): multiple elections ...
</span></span><span style=display:flex><span>  ... Passed --   5.5  <span style=color:#b452cd>7</span>  <span style=color:#b452cd>636</span>  <span style=color:#b452cd>138233</span>    <span style=color:#b452cd>0</span>
</span></span><span style=display:flex><span>Test (2B): basic agreement ...
</span></span><span style=display:flex><span>  ... Passed --   0.7  <span style=color:#b452cd>3</span>   <span style=color:#b452cd>16</span>    <span style=color:#b452cd>5272</span>    <span style=color:#b452cd>3</span>
</span></span><span style=display:flex><span>Test (2B): RPC byte count ...
</span></span><span style=display:flex><span>  ... Passed --   2.0  <span style=color:#b452cd>3</span>   <span style=color:#b452cd>48</span>  <span style=color:#b452cd>116836</span>   <span style=color:#b452cd>11</span>
</span></span><span style=display:flex><span>Test (2B): agreement after follower reconnects ...
</span></span><span style=display:flex><span>  ... Passed --   5.8  <span style=color:#b452cd>3</span>  <span style=color:#b452cd>156</span>   <span style=color:#b452cd>48680</span>    <span style=color:#b452cd>8</span>
</span></span><span style=display:flex><span>Test (2B): no agreement <span style=color:#8b008b;font-weight:700>if</span> too many followers disconnect ...
</span></span><span style=display:flex><span>  ... Passed --   3.7  <span style=color:#b452cd>5</span>  <span style=color:#b452cd>248</span>   <span style=color:#b452cd>56540</span>    <span style=color:#b452cd>3</span>
</span></span><span style=display:flex><span>Test (2B): concurrent Start()s ...
</span></span><span style=display:flex><span>  ... Passed --   0.7  <span style=color:#b452cd>3</span>   <span style=color:#b452cd>14</span>    <span style=color:#b452cd>4602</span>    <span style=color:#b452cd>6</span>
</span></span><span style=display:flex><span>Test (2B): rejoin of partitioned leader ...
</span></span><span style=display:flex><span>  ... Passed --   4.2  <span style=color:#b452cd>3</span>  <span style=color:#b452cd>182</span>   <span style=color:#b452cd>44785</span>    <span style=color:#b452cd>4</span>
</span></span><span style=display:flex><span>Test (2B): leader backs up quickly over incorrect follower logs ...
</span></span><span style=display:flex><span>  ... Passed --  20.3  <span style=color:#b452cd>5</span> <span style=color:#b452cd>2256</span> <span style=color:#b452cd>1296886</span>  <span style=color:#b452cd>102</span>
</span></span><span style=display:flex><span>Test (2B): RPC counts aren<span style=color:#a61717;background-color:#e3d2d2>&#39;</span>t too high ...
</span></span><span style=display:flex><span>  ... Passed --   2.2  <span style=color:#b452cd>3</span>   <span style=color:#b452cd>50</span>   <span style=color:#b452cd>17328</span>   <span style=color:#b452cd>12</span>
</span></span><span style=display:flex><span>Test (2C): basic persistence ...
</span></span><span style=display:flex><span>  ... Passed --   4.0  <span style=color:#b452cd>3</span>  <span style=color:#b452cd>112</span>   <span style=color:#b452cd>31325</span>    <span style=color:#b452cd>6</span>
</span></span><span style=display:flex><span>Test (2C): more persistence ...
</span></span><span style=display:flex><span>  ... Passed --  16.6  <span style=color:#b452cd>5</span> <span style=color:#b452cd>1168</span>  <span style=color:#b452cd>272848</span>   <span style=color:#b452cd>16</span>
</span></span><span style=display:flex><span>Test (2C): partitioned leader and one follower crash, leader restarts ...
</span></span><span style=display:flex><span>  ... Passed --   1.8  <span style=color:#b452cd>3</span>   <span style=color:#b452cd>42</span>   <span style=color:#b452cd>12032</span>    <span style=color:#b452cd>4</span>
</span></span><span style=display:flex><span>Test (2C): Figure <span style=color:#b452cd>8</span> ...
</span></span><span style=display:flex><span>  ... Passed --  34.7  <span style=color:#b452cd>5</span> <span style=color:#b452cd>1528</span>  <span style=color:#b452cd>341677</span>   <span style=color:#b452cd>36</span>
</span></span><span style=display:flex><span>Test (2C): unreliable agreement ...
</span></span><span style=display:flex><span>  ... Passed --   4.2  <span style=color:#b452cd>5</span>  <span style=color:#b452cd>212</span>   <span style=color:#b452cd>84694</span>  <span style=color:#b452cd>246</span>
</span></span><span style=display:flex><span>Test (2C): Figure <span style=color:#b452cd>8</span> (unreliable) ...
</span></span><span style=display:flex><span>  ... Passed --  38.8  <span style=color:#b452cd>5</span> <span style=color:#b452cd>4064</span> <span style=color:#b452cd>7936640</span>  <span style=color:#b452cd>209</span>
</span></span><span style=display:flex><span>Test (2C): churn ...
</span></span><span style=display:flex><span>  ... Passed --  16.6  <span style=color:#b452cd>5</span>  <span style=color:#b452cd>912</span>  <span style=color:#b452cd>837728</span>  <span style=color:#b452cd>251</span>
</span></span><span style=display:flex><span>Test (2C): unreliable churn ...
</span></span><span style=display:flex><span>  ... Passed --  16.3  <span style=color:#b452cd>5</span>  <span style=color:#b452cd>620</span>  <span style=color:#b452cd>216412</span>   <span style=color:#b452cd>50</span>
</span></span><span style=display:flex><span>Test (2D): snapshots basic ...
</span></span><span style=display:flex><span>  ... Passed --   5.6  <span style=color:#b452cd>3</span>  <span style=color:#b452cd>140</span>   <span style=color:#b452cd>57416</span>  <span style=color:#b452cd>220</span>
</span></span><span style=display:flex><span>Test (2D): install snapshots (disconnect) ...
</span></span><span style=display:flex><span>  ... Passed --  62.2  <span style=color:#b452cd>3</span> <span style=color:#b452cd>1758</span>  <span style=color:#b452cd>727536</span>  <span style=color:#b452cd>308</span>
</span></span><span style=display:flex><span>Test (2D): install snapshots (disconnect+unreliable) ...
</span></span><span style=display:flex><span>  ... Passed --  75.2  <span style=color:#b452cd>3</span> <span style=color:#b452cd>2098</span>  <span style=color:#b452cd>838116</span>  <span style=color:#b452cd>355</span>
</span></span><span style=display:flex><span>Test (2D): install snapshots (crash) ...
</span></span><span style=display:flex><span>  ... Passed --  32.3  <span style=color:#b452cd>3</span>  <span style=color:#b452cd>818</span>  <span style=color:#b452cd>412298</span>  <span style=color:#b452cd>335</span>
</span></span><span style=display:flex><span>Test (2D): install snapshots (unreliable+crash) ...
</span></span><span style=display:flex><span>  ... Passed --  38.0  <span style=color:#b452cd>3</span>  <span style=color:#b452cd>956</span>  <span style=color:#b452cd>409544</span>  <span style=color:#b452cd>268</span>
</span></span><span style=display:flex><span>Test (2D): crash and restart all servers ...
</span></span><span style=display:flex><span>  ... Passed --  10.0  <span style=color:#b452cd>3</span>  <span style=color:#b452cd>248</span>   <span style=color:#b452cd>84358</span>   <span style=color:#b452cd>53</span>
</span></span><span style=display:flex><span>PASS
</span></span><span style=display:flex><span>ok      6.824/raft      410.052s
</span></span></code></pre></div><hr width=100% id=EOF><p style=color:#777>Last modified on 2022-06-10</p></div></div><nav class=post-pagination><a class=newer-posts href=/posts/forward/>Next<br>为什么 std::forward 有两个 overloads</a>
<a class=older-posts href=/posts/mapreduce/>Previous<br>MapReduce with Go</a></nav><div class=post-comment-wrapper></div></div></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://jhzhu.xyz><div class=nav-title>Daniel Zhu</div><div class=nav-subtitle>A speck of dust within the galaxy</div></a><div class=nav-link-list><a class="a-block nav-link-item active" href=/posts>Archive</a>
<a class="a-block nav-link-item false" href=/tags>Tags</a>
<a class="a-block nav-link-item false" href=/about>About me</a>
<a class="a-block nav-link-item false" href=/index.xml>RSS Feed</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
2023 Daniel Zhu</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#raft class=nav-raft>Raft</a></li><ul><li><a href=#leader-election class=nav-leader-election>Leader election</a></li><li><a href=#log-replication class=nav-log-replication>Log replication</a></li><li><a href=#safety class=nav-safety>Safety</a></li></ul><li><a href=#6824-lab2 class=nav-6824-lab2>6.824 lab2</a></li></ul></div></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up</i></a>
<a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
2023 Daniel Zhu</div></div><script src=/js/journal.js></script></body></html>